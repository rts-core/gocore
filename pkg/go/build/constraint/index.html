<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="theme-color" content="#375EAB">

  <title>constraint - Go Documentation Server</title>

<link type="text/css" rel="stylesheet" href="../../../../lib/godoc/style.css">

<script>window.initFuncs = [];</script>
<script src="../../../../lib/godoc/jquery.js" defer></script>



<script>var goVersion = "go1.18.4";</script>
<script src="../../../../lib/godoc/godocs.js" defer></script>
</head>
<body>

<div id='lowframe' style="position: fixed; bottom: 0; left: 0; height: 0; width: 100%; border-top: thin solid grey; background-color: white; overflow: auto;">
...
</div><!-- #lowframe -->

<div id="topbar" class="wide"><div class="container">
<div class="top-heading" id="heading-wide"><a href="../../../../index.html">Go Documentation Server</a></div>
<div class="top-heading" id="heading-narrow"><a href="../../../../index.html">GoDoc</a></div>
<a href="index.html#" id="menu-button"><span id="menu-button-arrow">&#9661;</span></a>
<form method="GET" action="http://localhost:8080/search">
<div id="menu">

<span class="search-box"><input type="search" id="search" name="q" placeholder="Search" aria-label="Search" required><button type="submit"><span><!-- magnifying glass: --><svg width="24" height="24" viewBox="0 0 24 24"><title>submit search</title><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/><path d="M0 0h24v24H0z" fill="none"/></svg></span></button></span>
</div>
</form>

</div></div>



<div id="page" class="wide">
<div class="container">


  <h1>
    Package constraint
    <span class="text-muted"></span>
  </h1>







<div id="nav"></div>


<!--
	Copyright 2009 The Go Authors. All rights reserved.
	Use of this source code is governed by a BSD-style
	license that can be found in the LICENSE file.
-->
<!--
	Note: Static (i.e., not template-generated) href and id
	attributes start with "pkg-" to make it impossible for
	them to conflict with generated attributes (some of which
	correspond to Go identifiers).
-->

	<script>
	document.ANALYSIS_DATA = null;
	document.CALLGRAPH = null;
	</script>

	
		
		<div id="short-nav">
			<dl>
			<dd><code>import "go/build/constraint"</code></dd>
			</dl>
			<dl>
			<dd><a href="index.html#pkg-overview" class="overviewLink">Overview</a></dd>
			<dd><a href="index.html#pkg-index" class="indexLink">Index</a></dd>
			
			
			</dl>
		</div>
		<!-- The package's Name is printed as title by the top-level template -->
		<div id="pkg-overview" class="toggleVisible">
			<div class="collapsed">
				<h2 class="toggleButton" title="Click to show Overview section">Overview ▹</h2>
			</div>
			<div class="expanded">
				<h2 class="toggleButton" title="Click to hide Overview section">Overview ▾</h2>
				<p>
Package constraint implements parsing and evaluation of build constraint lines.
See <a href="https://golang.org/cmd/go/#hdr-Build_constraints">https://golang.org/cmd/go/#hdr-Build_constraints</a> for documentation about build constraints themselves.
</p>
<p>
This package parses both the original &ldquo;// +build&rdquo; syntax and the &ldquo;//go:build&rdquo; syntax that will be added in Go 1.17.
The parser is being included in Go 1.16 to allow tools that need to process Go 1.17 source code
to still be built against the Go 1.16 release.
See <a href="https://golang.org/design/draft-gobuild">https://golang.org/design/draft-gobuild</a> for details about the &ldquo;//go:build&rdquo; syntax.
</p>

				
			</div>
		</div>

		<div id="pkg-index" class="toggleVisible">
		<div class="collapsed">
			<h2 class="toggleButton" title="Click to show Index section">Index ▹</h2>
		</div>
		<div class="expanded">
			<h2 class="toggleButton" title="Click to hide Index section">Index ▾</h2>

		<!-- Table of contents for API; must be named manual-nav to turn off auto nav. -->
			<div id="manual-nav">
			<dl>
			
			
			
				
				<dd><a href="index.html#IsGoBuild">func IsGoBuild(line string) bool</a></dd>
			
				
				<dd><a href="index.html#IsPlusBuild">func IsPlusBuild(line string) bool</a></dd>
			
				
				<dd><a href="index.html#PlusBuildLines">func PlusBuildLines(x Expr) ([]string, error)</a></dd>
			
			
				
				<dd><a href="index.html#AndExpr">type AndExpr</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#AndExpr.Eval">func (x *AndExpr) Eval(ok func(tag string) bool) bool</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#AndExpr.String">func (x *AndExpr) String() string</a></dd>
				
			
				
				<dd><a href="index.html#Expr">type Expr</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#Parse">func Parse(line string) (Expr, error)</a></dd>
				
				
			
				
				<dd><a href="index.html#NotExpr">type NotExpr</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#NotExpr.Eval">func (x *NotExpr) Eval(ok func(tag string) bool) bool</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#NotExpr.String">func (x *NotExpr) String() string</a></dd>
				
			
				
				<dd><a href="index.html#OrExpr">type OrExpr</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#OrExpr.Eval">func (x *OrExpr) Eval(ok func(tag string) bool) bool</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#OrExpr.String">func (x *OrExpr) String() string</a></dd>
				
			
				
				<dd><a href="index.html#SyntaxError">type SyntaxError</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#SyntaxError.Error">func (e *SyntaxError) Error() string</a></dd>
				
			
				
				<dd><a href="index.html#TagExpr">type TagExpr</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#TagExpr.Eval">func (x *TagExpr) Eval(ok func(tag string) bool) bool</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#TagExpr.String">func (x *TagExpr) String() string</a></dd>
				
			
			
			</dl>
			</div><!-- #manual-nav -->

		

		
			<h3>Package files</h3>
			<p>
			<span style="font-size:90%">
			
				<a href="http://localhost:8080/src/go/build/constraint/expr.go">expr.go</a>
			
			</span>
			</p>
		
		</div><!-- .expanded -->
		</div><!-- #pkg-index -->

		

		
		
		
			
			
			<h2 id="IsGoBuild">func <a href="http://localhost:8080/src/go/build/constraint/expr.go?s=4132:4164#L153">IsGoBuild</a>
				<a class="permalink" href="index.html#IsGoBuild">&#xb6;</a>
				
				<span title="Added in Go 1.16">1.16</span>
			</h2>
			<pre>func IsGoBuild(line <a href="../../../builtin/index.html#string">string</a>) <a href="../../../builtin/index.html#bool">bool</a></pre>
			<p>
IsGoBuild reports whether the line of text is a &ldquo;//go:build&rdquo; constraint.
It only checks the prefix of the text, not that the expression itself parses.
</p>

			
			

		
			
			
			<h2 id="IsPlusBuild">func <a href="http://localhost:8080/src/go/build/constraint/expr.go?s=9039:9073#L343">IsPlusBuild</a>
				<a class="permalink" href="index.html#IsPlusBuild">&#xb6;</a>
				
				<span title="Added in Go 1.16">1.16</span>
			</h2>
			<pre>func IsPlusBuild(line <a href="../../../builtin/index.html#string">string</a>) <a href="../../../builtin/index.html#bool">bool</a></pre>
			<p>
IsPlusBuild reports whether the line of text is a &ldquo;// +build&rdquo; constraint.
It only checks the prefix of the text, not that the expression itself parses.
</p>

			
			

		
			
			
			<h2 id="PlusBuildLines">func <a href="http://localhost:8080/src/go/build/constraint/expr.go?s=11704:11749#L444">PlusBuildLines</a>
				<a class="permalink" href="index.html#PlusBuildLines">&#xb6;</a>
				
				<span title="Added in Go 1.16">1.16</span>
			</h2>
			<pre>func PlusBuildLines(x <a href="index.html#Expr">Expr</a>) ([]<a href="../../../builtin/index.html#string">string</a>, <a href="../../../builtin/index.html#error">error</a>)</pre>
			<p>
PlusBuildLines returns a sequence of &ldquo;// +build&rdquo; lines that evaluate to the build expression x.
If the expression is too complex to convert directly to &ldquo;// +build&rdquo; lines, PlusBuildLines returns an error.
</p>

			
			

		
		
			
			
			<h2 id="AndExpr">type <a href="http://localhost:8080/src/go/build/constraint/expr.go?s=2238:2272#L68">AndExpr</a>
				<a class="permalink" href="index.html#AndExpr">&#xb6;</a>
				
				<span title="Added in Go 1.16">1.16</span>
			</h2>
			<p>
An AndExpr represents the expression X &amp;&amp; Y.
</p>

			<pre>type AndExpr struct {
<span id="AndExpr.X"></span>    X, Y <a href="index.html#Expr">Expr</a>
}
</pre>

			

			

			
			
			

			

			
				
				<h3 id="AndExpr.Eval">func (*AndExpr) <a href="http://localhost:8080/src/go/build/constraint/expr.go?s=2305:2358#L74">Eval</a>
					<a class="permalink" href="index.html#AndExpr.Eval">&#xb6;</a>
					
					<span title="Added in Go 1.16">1.16</span>
				</h3>
				<pre>func (x *<a href="index.html#AndExpr">AndExpr</a>) Eval(ok func(tag <a href="../../../builtin/index.html#string">string</a>) <a href="../../../builtin/index.html#bool">bool</a>) <a href="../../../builtin/index.html#bool">bool</a></pre>
				
				
				
				
			
				
				<h3 id="AndExpr.String">func (*AndExpr) <a href="http://localhost:8080/src/go/build/constraint/expr.go?s=2486:2519#L81">String</a>
					<a class="permalink" href="index.html#AndExpr.String">&#xb6;</a>
					
					<span title="Added in Go 1.16">1.16</span>
				</h3>
				<pre>func (x *<a href="index.html#AndExpr">AndExpr</a>) String() <a href="../../../builtin/index.html#string">string</a></pre>
				
				
				
				
			
		
			
			
			<h2 id="Expr">type <a href="http://localhost:8080/src/go/build/constraint/expr.go?s=932:1452#L13">Expr</a>
				<a class="permalink" href="index.html#Expr">&#xb6;</a>
				
				<span title="Added in Go 1.16">1.16</span>
			</h2>
			<p>
An Expr is a build tag constraint expression.
The underlying concrete type is *AndExpr, *OrExpr, *NotExpr, or *TagExpr.
</p>

			<pre>type Expr interface {
    <span class="comment">// String returns the string form of the expression,</span>
    <span class="comment">// using the boolean syntax used in //go:build lines.</span>
    String() <a href="../../../builtin/index.html#string">string</a>

    <span class="comment">// Eval reports whether the expression evaluates to true.</span>
    <span class="comment">// It calls ok(tag) as needed to find out whether a given build tag</span>
    <span class="comment">// is satisfied by the current build configuration.</span>
    Eval(ok func(tag <a href="../../../builtin/index.html#string">string</a>) <a href="../../../builtin/index.html#bool">bool</a>) <a href="../../../builtin/index.html#bool">bool</a>
    <span class="comment">// contains filtered or unexported methods</span>
}</pre>

			

			

			
			
			

			
				
				<h3 id="Parse">func <a href="http://localhost:8080/src/go/build/constraint/expr.go?s=3744:3781#L141">Parse</a>
					<a class="permalink" href="index.html#Parse">&#xb6;</a>
					
					<span title="Added in Go 1.16">1.16</span>
				</h3>
				<pre>func Parse(line <a href="../../../builtin/index.html#string">string</a>) (<a href="index.html#Expr">Expr</a>, <a href="../../../builtin/index.html#error">error</a>)</pre>
				<p>
Parse parses a single build constraint line of the form &ldquo;//go:build ...&rdquo; or &ldquo;// +build ...&rdquo;
and returns the corresponding boolean expression.
</p>

				
				
			

			
		
			
			
			<h2 id="NotExpr">type <a href="http://localhost:8080/src/go/build/constraint/expr.go?s=1856:1887#L46">NotExpr</a>
				<a class="permalink" href="index.html#NotExpr">&#xb6;</a>
				
				<span title="Added in Go 1.16">1.16</span>
			</h2>
			<p>
A NotExpr represents the expression !X (the negation of X).
</p>

			<pre>type NotExpr struct {
<span id="NotExpr.X"></span>    X <a href="index.html#Expr">Expr</a>
}
</pre>

			

			

			
			
			

			

			
				
				<h3 id="NotExpr.Eval">func (*NotExpr) <a href="http://localhost:8080/src/go/build/constraint/expr.go?s=1920:1973#L52">Eval</a>
					<a class="permalink" href="index.html#NotExpr.Eval">&#xb6;</a>
					
					<span title="Added in Go 1.16">1.16</span>
				</h3>
				<pre>func (x *<a href="index.html#NotExpr">NotExpr</a>) Eval(ok func(tag <a href="../../../builtin/index.html#string">string</a>) <a href="../../../builtin/index.html#bool">bool</a>) <a href="../../../builtin/index.html#bool">bool</a></pre>
				
				
				
				
			
				
				<h3 id="NotExpr.String">func (*NotExpr) <a href="http://localhost:8080/src/go/build/constraint/expr.go?s=2001:2034#L56">String</a>
					<a class="permalink" href="index.html#NotExpr.String">&#xb6;</a>
					
					<span title="Added in Go 1.16">1.16</span>
				</h3>
				<pre>func (x *<a href="index.html#NotExpr">NotExpr</a>) String() <a href="../../../builtin/index.html#string">string</a></pre>
				
				
				
				
			
		
			
			
			<h2 id="OrExpr">type <a href="http://localhost:8080/src/go/build/constraint/expr.go?s=2781:2814#L98">OrExpr</a>
				<a class="permalink" href="index.html#OrExpr">&#xb6;</a>
				
				<span title="Added in Go 1.16">1.16</span>
			</h2>
			<p>
An OrExpr represents the expression X || Y.
</p>

			<pre>type OrExpr struct {
<span id="OrExpr.X"></span>    X, Y <a href="index.html#Expr">Expr</a>
}
</pre>

			

			

			
			
			

			

			
				
				<h3 id="OrExpr.Eval">func (*OrExpr) <a href="http://localhost:8080/src/go/build/constraint/expr.go?s=2846:2898#L104">Eval</a>
					<a class="permalink" href="index.html#OrExpr.Eval">&#xb6;</a>
					
					<span title="Added in Go 1.16">1.16</span>
				</h3>
				<pre>func (x *<a href="index.html#OrExpr">OrExpr</a>) Eval(ok func(tag <a href="../../../builtin/index.html#string">string</a>) <a href="../../../builtin/index.html#bool">bool</a>) <a href="../../../builtin/index.html#bool">bool</a></pre>
				
				
				
				
			
				
				<h3 id="OrExpr.String">func (*OrExpr) <a href="http://localhost:8080/src/go/build/constraint/expr.go?s=3026:3058#L111">String</a>
					<a class="permalink" href="index.html#OrExpr.String">&#xb6;</a>
					
					<span title="Added in Go 1.16">1.16</span>
				</h3>
				<pre>func (x *<a href="index.html#OrExpr">OrExpr</a>) String() <a href="../../../builtin/index.html#string">string</a></pre>
				
				
				
				
			
		
			
			
			<h2 id="SyntaxError">type <a href="http://localhost:8080/src/go/build/constraint/expr.go?s=3339:3469#L128">SyntaxError</a>
				<a class="permalink" href="index.html#SyntaxError">&#xb6;</a>
				
				<span title="Added in Go 1.16">1.16</span>
			</h2>
			<p>
A SyntaxError reports a syntax error in a parsed build expression.
</p>

			<pre>type SyntaxError struct {
<span id="SyntaxError.Offset"></span>    Offset <a href="../../../builtin/index.html#int">int</a>    <span class="comment">// byte offset in input where error was detected</span>
<span id="SyntaxError.Err"></span>    Err    <a href="../../../builtin/index.html#string">string</a> <span class="comment">// description of error</span>
}
</pre>

			

			

			
			
			

			

			
				
				<h3 id="SyntaxError.Error">func (*SyntaxError) <a href="http://localhost:8080/src/go/build/constraint/expr.go?s=3471:3507#L133">Error</a>
					<a class="permalink" href="index.html#SyntaxError.Error">&#xb6;</a>
					
					<span title="Added in Go 1.16">1.16</span>
				</h3>
				<pre>func (e *<a href="index.html#SyntaxError">SyntaxError</a>) Error() <a href="../../../builtin/index.html#string">string</a></pre>
				
				
				
				
			
		
			
			
			<h2 id="TagExpr">type <a href="http://localhost:8080/src/go/build/constraint/expr.go?s=1502:1578#L29">TagExpr</a>
				<a class="permalink" href="index.html#TagExpr">&#xb6;</a>
				
				<span title="Added in Go 1.16">1.16</span>
			</h2>
			<p>
A TagExpr is an Expr for the single tag Tag.
</p>

			<pre>type TagExpr struct {
<span id="TagExpr.Tag"></span>    Tag <a href="../../../builtin/index.html#string">string</a> <span class="comment">// for example, “linux” or “cgo”</span>
}
</pre>

			

			

			
			
			

			

			
				
				<h3 id="TagExpr.Eval">func (*TagExpr) <a href="http://localhost:8080/src/go/build/constraint/expr.go?s=1611:1664#L35">Eval</a>
					<a class="permalink" href="index.html#TagExpr.Eval">&#xb6;</a>
					
					<span title="Added in Go 1.16">1.16</span>
				</h3>
				<pre>func (x *<a href="index.html#TagExpr">TagExpr</a>) Eval(ok func(tag <a href="../../../builtin/index.html#string">string</a>) <a href="../../../builtin/index.html#bool">bool</a>) <a href="../../../builtin/index.html#bool">bool</a></pre>
				
				
				
				
			
				
				<h3 id="TagExpr.String">func (*TagExpr) <a href="http://localhost:8080/src/go/build/constraint/expr.go?s=1688:1721#L39">String</a>
					<a class="permalink" href="index.html#TagExpr.String">&#xb6;</a>
					
					<span title="Added in Go 1.16">1.16</span>
				</h3>
				<pre>func (x *<a href="index.html#TagExpr">TagExpr</a>) String() <a href="../../../builtin/index.html#string">string</a></pre>
				
				
				
				
			
		
	

	







<div id="footer">
Build version go1.18.4.<br>
Except as <a href="https://developers.google.com/site-policies#restrictions">noted</a>,
the content of this page is licensed under the
Creative Commons Attribution 3.0 License,
and code is licensed under a <a href="../../../../LICENSE">BSD license</a>.<br>
<a href="https://golang.org/doc/tos.html">Terms of Service</a> |
<a href="https://www.google.com/intl/en/policies/privacy/">Privacy Policy</a>
</div>

</div><!-- .container -->
</div><!-- #page -->
</body>
</html>
